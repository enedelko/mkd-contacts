## 1.1. Технологический стек
* **Frontend:** React (Vite) + Tailwind CSS. Использование хуков для управления состоянием и библиотек для доступа к камере (html5-qrcode).
* **Backend:** Python 3.9+ (FastAPI). Асинхронная обработка запросов и встроенная валидация через Pydantic.
* **СУБД:** PostgreSQL 15+. Обеспечение ACID-транзакций для игровых баллов.
* **Инфраструктура:** Контейнеризация через Docker и Docker-compose.

## 1.2. Схема взаимодействия компонентов
1.  **Client (React SPA):**
    * Реализует PWA-функционал (Service Workers, Manifest).
    * Авторизация: Хранение JWT-токена и его передача в заголовке Authorization: Bearer.
2.  **Server (FastAPI):**
    * **Auth Module:** Регистрация и выдача JWT.
    * **Proxy Module:** Запросы к Open Food Facts API с кешированием результатов в локальную БД.
    * **Logic Module:** Расчет баллов, автоматический пересчет expiry_date при вскрытии, контроль остатков.
    * **Auto-Doc:** Swagger UI (/docs) для тестирования эндпоинтов.
3.  **Database (PostgreSQL):**
    * Хранение данных в трехуровневой структуре: Продукты (шаблоны) -> Экземпляры (items) -> Экземпляры упаковки (user_packaging). Экземпляры упаковки создаются при consume/waste товара и отслеживают жизненный цикл упаковки до сдачи в переработку или выброса.

## 1.3. Интеграционная стратегия (Proxy Pattern)
Для предотвращения блокировок CORS и централизации данных:
1.  Фронтенд запрашивает информацию о штрих-коде только через внутренний эндпоинт `/scan`.
2.  Бэкенд обогащает данные из внешних источников и сохраняет их в таблицу `products` (шаблоны товаров) перед отдачей клиенту.

## 1.4. Контейнеризация (Docker)
Система разворачивается тремя сервисами:
* `frontend`: Nginx, отдающий статический бандл React.
* `backend`: Python-приложение под управлением Uvicorn/Gunicorn.
* `db`: Официальный образ Postgres с настроенными томами для данных.

архитектура может меняться, если это требуется
